
<!doctype>
<html lang="ja">

<head>
  <meta content='package.jsonã«æŒ‡å®šã™ã‚‹dependencies, devDependenciesãªã©ã®ä½¿ã„æ–¹ - Allajah&#39;s Reservoir' name='title' />
  <meta content='package.jsonã«æŒ‡å®šã™ã‚‹dependencies, devDependenciesãªã©ã®ä½¿ã„æ–¹ - Allajah&#39;s Reservoir' name='og:title' />
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="//necolas.github.io/normalize.css/7.0.0/normalize.css">
  <title>package.jsonã«æŒ‡å®šã™ã‚‹dependencies, devDependenciesãªã©ã®ä½¿ã„æ–¹ - Allajah&#39;s Reservoir</title>
  <link href='http://blog.araya.dev/images/favicon.png' rel='shortcut icon'>
<link href='http://blog.araya.dev/assets/main.css' rel='stylesheet' type='text/css' />

<meta content='width=device-width, initial-scale=1.0, user-scalable=no' name='viewport'>
<meta content='text/html; charset=utf-8' http-equiv='content-type' />

  <meta content='http://blog.araya.dev/posts/package-json-dependencies.html' property='og:url' />
  <meta content="dependenciesmoduleåã‚’keyã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’valueã¨ã—ãŸObjectã§å®šç¾©ã™ã‚‹ã€‚"dependencies": {  "react": "^15.6.0"  }tarballã‚„gitã®URLã‚‚ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚de..." property='og:description' />
  <meta content="article" property="og:type" />

<!-- - -->


<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-104175258-1', 'auto');
  ga('send', 'pageview');

</script>




</head>

<body>
  <header class="site-title">
    <a href="http://blog.araya.dev">
        <img src="http://blog.araya.dev/images/icon_circle.png" alt="Home" width="80" height="80">
      </a>
    <p>Allajah's Reservoir</p>
  </header>
  <div class="container">
      <nav aria-label="Main">
        <ul>
          
          <li>
            <a class="" href="http://blog.araya.dev/">
          Posts
        </a> 
          </li>
        </ul>
      </nav>
      <main class="">
        
          
          <div class="">03 Jul 2017</div>
          
          <h1 class="page-title"> package.jsonã«æŒ‡å®šã™ã‚‹dependencies, devDependenciesãªã©ã®ä½¿ã„æ–¹ </h1>
          
          <a href="https://twitter.com/share" class="twitter-share-button">Tweet</a>
          <script>
            ! function(d, s, id) {
              var js, fjs = d.getElementsByTagName(s)[0];
              if (!d.getElementById(id)) {
                js = d.createElement(s);
                js.id = id;
                js.src = "//platform.twitter.com/widgets.js";
                fjs.parentNode.insertBefore(js, fjs);
              }
            }(document, "script", "twitter-wjs");
          </script>
          <a href="http://b.hatena.ne.jp/entry/" class="hatena-bookmark-button" data-hatena-bookmark-layout="basic-label" data-hatena-bookmark-lang="en" title="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ "><img src="https://b.st-hatena.com/images/entry-button/button-only@2x.png" alt="ã“ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’ã¯ã¦ãªãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ã«è¿½åŠ " width="20" height="20" style="border: none;" /></a>
<script
  type="text/javascript" src="https://b.st-hatena.com/js/bookmark_button.js" charset="utf-8" async="async"></script>


          
        
        <div class="markdown-body">
          <h2 id="dependencies">dependencies</h2>
<p>moduleåã‚’keyã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’valueã¨ã—ãŸObjectã§å®šç¾©ã™ã‚‹ã€‚</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"react"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^15.6.0"</span><span class="w">
  </span><span class="p">}</span></code></pre></figure>

<p>tarballã‚„gitã®URLã‚‚ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚</p>

<h2 id="devdependencies">devDependencies</h2>
<p>æ›¸ãæ–¹ã¯<code class="highlighter-rouge">dependencies</code>ã¨åŒã˜ã€‚ãƒ“ãƒ«ãƒ‰ã‚„ãƒ†ã‚¹ãƒˆã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆã®ãŸã‚ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãªã©ã€å¯¾è±¡ã¨ãªã‚‹moduleã®<em>é–‹ç™º</em>ã«å¿…è¦ãªä¾å­˜é–¢ä¿‚ã‚’è¨˜è¿°ã™ã‚‹ã€‚
ã‚ã‚‹moduleã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã¨ãã€ãã®moduleã«devDependenciesã¨ã—ã¦æŒ‡å®šã•ã‚Œã¦ã„ã‚‹moduleã¯ä¾å­˜é–¢ä¿‚ã¨ã—ã¦è§£æ±ºã•ã‚Œãªã„ã€‚
CoffeeScript, TypeScriptãªã©ã®AltJSã‚„ESæœ€æ–°ç‰ˆã‚’CommonJSå‘ã‘ã«ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«/ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹moduleã®å ´åˆã¯ã€ <code class="highlighter-rouge">scripts.prepare</code> ã«ãƒ“ãƒ«ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æŒ‡å®šã—ã¦ãŠãã¨ã‚ˆã„ã€‚</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="s2">"devDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"coffee-script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"~1.6.3"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span><span class="s2">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="s2">"prepare"</span><span class="p">:</span><span class="w"> </span><span class="s2">"coffee -o lib/ -c src/index.coffee"</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>ã“ã‚Œã«ã‚ˆã£ã¦npm registryã«publishã•ã‚Œã‚‹å‰ã« <code class="highlighter-rouge">scripts.prepare</code> ã§æŒ‡å®šã—ãŸã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚</p>

<h2 id="peerdependencies">peerDependencies</h2>
<p>æ›¸ãæ–¹ã¯<code class="highlighter-rouge">dependencies</code>ã¨åŒã˜ã€‚</p>

<p>å¯¾è±¡ã¨ãªã‚‹moduleãŒç‰¹å®šã®moduleã®ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ä¾å­˜ã—ã¦ã„ã‚‹æ™‚ã«ä½¿ç”¨ã™ã‚‹ã€‚
ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã€ãã®ã‚¿ã‚¹ã‚¯ãƒ©ãƒ³ãƒŠãƒ¼ã®ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã—ã‹å‹•ä½œã—ãªã„ã¨ããªã©ã«æŒ‡å®šã™ã‚‹ã€‚
peerDependenciesã«æŒ‡å®šã•ã‚Œã¦ã„ã‚‹moduleãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ãªã„å ´åˆè­¦å‘ŠãŒå‡ºã‚‹ã€‚</p>

<p>ä¾‹ãˆã°ã€webpack-dev-serverã¯peerDependencyã¨ã—ã¦<a href="https://github.com/webpack/webpack-dev-server/blob/master/package.json#L7">webpackã‚’æŒ‡å®šã—ã¦ã„ã‚‹</a>ã®ã§ã€webpack-dev-serverå˜ä½“ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã¨ãã«ã¯å‹•ä½œã›ãšã€npmã¯è­¦å‘Šã‚’å‡ºã—ã¦ãã‚Œã‚‹ã€‚</p>

<p class="filename">package.json</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm-sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"webpack-dev-server"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^2.6.1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm install
npm WARN webpack-dev-server@2.6.1 requires a peer of webpack@^2.2.0 || ^3.0.0 but none was installed.
npm WARN webpack-dev-middleware@1.12.0 requires a peer of webpack@^1.0.0 || ^2.0.0 || ^3.0.0 but none was installed.
</code></pre></div></div>

<p>peerDependencyã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸæ™‚ã¯æŒ‡å®šã•ã‚Œã¦ã„ã‚‹dependencyãŒè§£æ±ºã§ãã‚‹ã‚ˆã†ã«ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚</p>

<p class="filename">package.json</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm-sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"webpack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^3.4.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"webpack-dev-server"</span><span class="p">:</span><span class="w"> </span><span class="s2">"^2.6.1"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<h2 id="bundleddependencies-ã¾ãŸã¯-bundledependencies">bundledDependencies ã¾ãŸã¯ bundleDependencies</h2>
<p>packageåã‚’é…åˆ—ã§è¨˜è¿°ã™ã‚‹ã€‚<br />
<code class="highlighter-rouge">npm pack</code>ã«ã‚ˆã‚Šnpm packageã‚’tarballå½¢å¼ã§ä½œæˆã—ã€ä»–ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãã®tgzãƒ•ã‚¡ã‚¤ãƒ«ã‚’<code class="highlighter-rouge">npm install</code>ã—ãŸã¨ãã«ã€bundleDependenciesã§æŒ‡å®šã—ãŸä¾å­˜ãŒè§£æ±ºã•ã‚Œã‚‹ã€‚</p>

<p class="filename">/tmp/npm-sample/package.json</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"npm-sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v0.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"bundledDependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"colorpack"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ npm pack
npm-sample-0.0.0.tgz
</code></pre></div></div>

<p class="filename">/tmp/bundle-sample/package.json</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle-sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"npm-sample"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file:../npm-sample/npm-sample-0.0.0.tgz"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p class="filename">/tmp/bundle-sample/package-lock.json</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bundle-sample"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"lockfileVersion"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"requires"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="s2">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"colorpack"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.2"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"resolved"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://registry.npmjs.org/colorpack/-/colorpack-0.0.2.tgz"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"npm-sample"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file:../npm-sample/npm-sample-0.0.0.tgz"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"requires"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"colorpack"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0.0.2"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p><code class="highlighter-rouge">/tmp/npm-sample</code>ã®package.jsonå†…ã§bundledDependenciesã¨ã—ã¦æŒ‡å®šã—ãŸ<code class="highlighter-rouge">colorpack</code>ãŒã€ä¾å­˜é–¢ä¿‚ã¨ã—ã¦è§£æ±ºã•ã‚Œã¦ã‚‹ã®ãŒã‚ã‹ã‚‹ã€‚</p>

<h2 id="optionaldependencies">optionalDependencies</h2>

<p>åå‰ã®é€šã‚Šã€å¿…é ˆã§ã¯ãªã„ã‚ªãƒ—ã‚·ãƒ§ãƒŠãƒ«ãªdependencyã‚’æŒ‡å®šã™ã‚‹ã€‚optionalDependencyã‚’ã‚³ãƒ¼ãƒ‰å†…ã§ä½¿ç”¨ã™ã‚‹å ´åˆã€dependencyãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ã‚’åˆ¤å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">try</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">foo</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'foo'</span><span class="p">)</span>
  <span class="kd">var</span> <span class="nx">fooVersion</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'foo/package.json'</span><span class="p">).</span><span class="nx">version</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">er</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">foo</span> <span class="o">=</span> <span class="kc">null</span>
<span class="p">}</span>
<span class="k">if</span> <span class="p">(</span> <span class="nx">notGoodFooVersion</span><span class="p">(</span><span class="nx">fooVersion</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
  <span class="nx">foo</span> <span class="o">=</span> <span class="kc">null</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="nx">foo</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">foo</span><span class="p">.</span><span class="nx">doFooThings</span><span class="p">()</span>
<span class="p">}</span></code></pre></figure>

<h1 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h1>
<p>ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã‚‹æ™‚ã¯<code class="highlighter-rouge">dependencies</code>, <code class="highlighter-rouge">devDependencies</code>, <code class="highlighter-rouge">peerDependencies</code>ã‚’ä½¿ã„åˆ†ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ã‘ã©ã€è£½å“ä½œã‚‹æ™‚ã¯å…¨éƒ¨<code class="highlighter-rouge">dependencies</code>ã‚‚ã—ãã¯<code class="highlighter-rouge">devDependencies</code>ã«ã¾ã¨ã‚ã¦æ›¸ã„ã¡ã‚ƒã£ã¦å•é¡Œãªã•ãã†ã€‚
åˆ†ã‹ã‚Šã‚„ã™ã•ã®ãŸã‚ã«ãƒ†ã‚¹ãƒˆã‚„ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ãªã‚“ã‹ã¯<code class="highlighter-rouge">devDependencies</code>ã€ã‚³ãƒ¼ãƒ‰å†…ã§ä½¿ç”¨ã—ã¦ã„ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯<code class="highlighter-rouge">dependencies</code>ã«æ›¸ã„ã¦ã‚‚ã„ã„ã‹ãªã¨ã¯æ€ã†ã€‚</p>

<p>bundledDependenciesã¯ä½¿ã„ã©ã“ã‚ãŒã‚ˆãåˆ†ã‹ã‚‰ãªã„ ğŸ¤”</p>

        </div>
        <p class="mt4">
  Allajah
  <span class="silver">at 11:09</span>
</p>


      </main>
  </div>
  <footer class="footer">
    <div class="footer-sns">
      <a href="https://twitter.com/_araya_" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter"></i></a>
      <a href="https://github.com/allajah" target="_blank" rel="noopener noreferrer"><i class="fa fa-github"></i></a>
      <a href="/feed.xml" target="_blank" rel="noopener noreferrer"><i class="fa fa-rss"></i></a>
    </div>
  </footer>
</body>

</html>
